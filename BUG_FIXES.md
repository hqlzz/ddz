# 斗地主游戏 - 测试检查清单

## 🔥 v1.2.1 紧急修复

### CSS gap负值导致布局崩溃 ✅
**时间**: 2025-10-21 15:58  
**严重度**: 🔴 严重

**问题**: 
- 左侧玩家卡牌全部堆叠显示
- 用户截图显示很多重叠的"斗地主"字样
- CSS使用了`gap: -50px`等负值，但gap属性不支持负值

**修复**:
```css
/* 改用margin负值实现卡牌重叠 */
.left-cards .card { margin-top: -60px; }
.top-cards .card { margin-left: -35px; }
.bottom-cards .card { margin-left: -30px; }
```

---

## ✅ v1.2.0 修复的Bug

### 1. 底牌区域引用错误
- **问题**: `bottomCardsArea` 引用了错误的DOM元素
- **修复**: 改为正确引用 `.bottom-cards-area`
- **影响**: 底牌现在能正确显示

### 2. 按钮显示控制
- **问题**: `actionButtons` (出牌按钮) 没有被正确隐藏/显示
- **修复**: 在 `updateButtons()` 中添加控制逻辑
- **影响**: 按钮只在正确的游戏阶段显示

### 3. 初始状态
- **问题**: HTML中 `action-buttons` 默认可见
- **修复**: 添加 `hidden` 类
- **影响**: 游戏开始时不会误显示按钮

### 4. DOM引用
- **问题**: 缺少 `landlordCards` 的直接引用
- **修复**: 添加到 `initElements()`
- **影响**: 代码更清晰

## 🎯 核心优化

### 布局系统
- 所有玩家使用 `position: fixed` 固定定位
- 中央区域使用 `flexbox` + `order` 控制顺序
- 底牌区域在中央顶部，初始隐藏
- 出牌区域并排显示，尺寸增大

### 视觉优化
- 卡牌尺寸：玩家 85x115px，小牌 55x75px
- 出牌区域金色边框 3px，光晕效果增强
- 按钮hover放大到 1.08倍
- 游戏状态文字带发光效果

### 性能优化
- 删除重复的CSS定义
- 删除无用的伪元素
- 简化DOM结构

## 🧪 测试步骤

### 1. 页面加载
- [ ] 页面正常加载
- [ ] 显示"开始游戏"按钮
- [ ] 其他按钮隐藏

### 2. 开始游戏
- [ ] 点击"开始游戏"
- [ ] 发牌动画正常
- [ ] 三个玩家都有17张牌
- [ ] 底牌隐藏（3张）

### 3. 叫地主阶段
- [ ] 显示"叫地主"和"不叫"按钮
- [ ] 15秒倒计时正常
- [ ] AI自动叫地主
- [ ] 超时自动处理

### 4. 底牌显示
- [ ] 地主确定后底牌显示
- [ ] 底牌在屏幕上方中央
- [ ] 底牌分配给地主
- [ ] 底牌动画正常

### 5. 出牌阶段
- [ ] 显示"提示"、"出牌"、"不要"按钮
- [ ] 20秒倒计时正常
- [ ] 可以选择手牌
- [ ] 选中的牌上浮
- [ ] 出牌显示在中央区域

### 6. 中央出牌区
- [ ] 三个玩家的牌并排显示
- [ ] 金色边框和光晕
- [ ] 出牌动画流畅
- [ ] 可以清晰看到所有人的牌

### 7. 游戏结束
- [ ] 一方出完牌触发结束
- [ ] 显示胜利/失败
- [ ] 显示得分信息
- [ ] "再来一局"按钮可用

## 📊 已知工作正常的功能

✅ 发牌系统
✅ 叫地主/抢地主
✅ 15种牌型识别
✅ AI智能出牌
✅ 倒计时系统
✅ Toast消息
✅ 卡牌选择
✅ 出牌验证
✅ 游戏结算

## 🎮 测试命令

```bash
# 重启服务器
pkill -9 python3
cd /workspaces/ddz
python3 -m http.server 8000

# 访问
http://localhost:8000
```

---

**测试完成时间**: 待测试
**测试人员**: 待测试
**测试结果**: 待测试
